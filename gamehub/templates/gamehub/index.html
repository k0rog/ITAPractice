{% extends 'gamehub/layout.html' %}
{% load static %}

{% block style %}
    <link rel="stylesheet" href="{% static 'gamehub/libs/nouislider.min.css' %}">
    <link rel="stylesheet" href="{% static 'gamehub/css/style.css' %}">
{% endblock %}

{% block title %}
    <title>GameHub</title>
{% endblock %}

{% block content %}

<main class="games-list-container wrap">

    <aside class="filters">
        <button class="filters__toggle-button">
            <img src="{% static 'gamehub/img/triangle.svg' %}" alt="">
        </button>

        <h2 class="filters__heading">Filters</h2>
        <form class="filter-form filters__form" action="" method="get">
            <div class="sort-option">
            <label for="platform-picker">Platform</label>
            <select class="filter-form__platform-picker" size="1" name="platform" id="platform-picker">
                <option value="PS5">PS5</option>
                <option value="PC">PC</option>
                <option value="XBox one">XBox one</option>
            </select>
            <ul class="selected-filters">
                <li class="list-element">PS5</li>
                <li class="list-element">Xbox one</li>
                <li class="list-element">PC</li>
            </ul>
            </div>
            <div class="sort-option">
            <label for="genre-picker">Genre</label>
            <select class="filter-form__genre-picker" size="1" name="genre" id="genre-picker">
                <option value="MOBA">MOBA</option>
                <option value="TBS">TBS</option>
                <option value="Multiplayer">Multiplayer</option>
            </select>
            <ul class="selected-filters">
                <li class="list-element">MOBA</li>
                <li class="list-element">Multiplayer</li>
                <li class="list-element">Shooter</li>
            </ul>
            </div>
            <div class="sort-option">
            <label for="slider">Rating</label>
            <div class="filters-form__rating-slider slider" id="slider">
                <div id="target"></div>
            </div>
            </div>
            <input class="filter-form__button button" type="submit" value="Apply">
        </form>
    </aside>

    <section class="games-list">

        <form class="search-form" action="" method="get">
          <input class="search-form__input" name="search" placeholder="Type here..." type="search">
          <button class="search-form__button" type="submit"></button>
        </form>

        <div class="games">
            {% for game in games %}
            <div class="games__game game">
                <img alt="{{ game.name }}" src="{{ game.cover }}" class="game__image"/>
                <div class="description">
                    <span class="description__title">{{ game.name }}</span>
                    <ul class="description__genres genres">
                        {% for genre in game.genres.all %}
                        <li><button class="genres__genre list-element">{{ genre.name }}</button></li>
                        {% endfor %}
                    </ul>
                    <a href="/{{ game.slug }}" class="description__open-link button">Open</a>
                {% if user.is_authenticated %}
                    {% if game.in_musts %}
                        <button class="game-unmust-button button" id="igdb_id={{ game.igdb_id }}">unMust</button>
                    {% else %}
                        <button class="game-must-button button" id="igdb_id={{ game.igdb_id }}">Must</button>
                    {% endif %}
                {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>

        <ul class="page-numbers">
            <li class="page-numbers__number page-numbers__number_selected"><span>1</span></li>
            <li class="page-numbers__number"><span>2</span></li>
            <li class="page-numbers__number"><span>3</span></li>
        </ul>
    </section>
</main>

{% endblock %}

{% block scripts %}
    <script src="{% static 'gamehub/libs/nouislider.min.js' %}"></script>
    <script src="{% static 'gamehub/js/main_page.js' %}"></script>
{% endblock %}